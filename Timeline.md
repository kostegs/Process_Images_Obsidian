Таймлайны очень незаменимы в кат-сценах. 

Таймлайн создается нодой "Add Timeline"

![[Pasted image 20240711090145.png|Timeline_Add_timeline]]

Внутри мы можем добавлять дорожки 

![[Pasted image 20240711090218.png|Timeline_tracks]]

Начнем с Float, добавим дорожку, назовем Yaw

![[Pasted image 20240711090244.png|Timeline_Yaw_Track]]

Поставим Length 2 секунды.

- Параметр AutoPlay отвечает за то, что таймлайн запустится автоматически при запуске игры

![[Pasted image 20240711090319.png|Timeline_AutoPlay]]

- Loop - отвечает за зацикливание.

- Replicated - нужно ли реплицировать с сервера на клиента. 

- Ignore Time Dilation - в игре время течет, как мы его видим. Мы можем либо замедлять время, либо ускорять. 
Например, добавим ноду X и вызовем Set Global Time Dilation

![[Pasted image 20240711090532.png|Timeline_SetGlobalTimeDilation]]

Так время в игре замедлится в два раза, при нажатии на X.

В таймлайне можно игнорировать Time Dilation. Поставили 2 секунды, оно и будет 2 секунды выполняться. 

Точки добавляются через зажатую клавишу Shift

![[Pasted image 20240711090910.png|Timeline_AddPoints]]

Дорожек может быть много 

![[Pasted image 20240711091014.png|Timeline_FewTracks]]

И все они будут выходными узлами ноды.

Разберемся со входными параметрами

![[Pasted image 20240711091059.png|Timeline_NodeInputParameters]]

- Play - запускает таймлайн
- Play from Start - запускает с самого начала
- Stop - остановить
- Reverse - двигаться назад
- Reverse From End - двигаться назад с конца
- Set new time - спозиционировать таймлайн на нужное время

Выходные параметры:

- Update - вызывается каждый кадр
- Finished - когда закончился
- Direction - содержит два значения - куда движется вперед или назад
- Yaw - это наша добавленная дорожка

Допустим выведем значение на Update:

![[Pasted image 20240711091434.png|Timeline_PrintOnUpdate]]

![[Pasted image 20240711091421.png|Timeline_PrintOnUpdate1]]

Вытащим дверь на сцену из стартер-контента

![[Pasted image 20240711091655.png|Timeline_DoorFromStarterContent]]

При нуле градусов по Z она закрыта, при 90 - открыта.

Сделаем поворот двери. В таймлайне сделаем, чтобы Yaw рос за 2 секунды до 90

![[Pasted image 20240711092049.png|Timeline_DoorReturn]]

При нажатии - дверь открывается 

![[Pasted image 20240711092134.png|Timeline_DoorIsOpened]]

Добавим Flip-Flop и теперь можем открывать и закрывать дверь

![[Pasted image 20240711092315.png|Timeline_Flip_Flop]]

Допустим, мы хотим, чтобы при нажатии на кнопку дверь открывалась, но только когда мы рядом с ней

Добавим ссылки на пешку и на дверь

![[Pasted image 20240711092500.png|Timeline_Links]]

Добавим ноду Get Distance To - она позволяет вычислить расстояние между двумя экторами

![[Pasted image 20240711092544.png|Timeline_GetDistanceTo]]

Сделаем, что если расстояние меньше  200, то запустить открытие/закрытие

![[Pasted image 20240711092858.png|Timeline_Destination]]

Допустим я хочу ограничить, чтобы реверс можно было включить, когда дверь полностью откроется.

Добавим сравнение. Если угол у двери меньше или равно 110 градусов, то открываем, иначе закрываем.

![[Pasted image 20240711093156.png|Timeline_Angle]]

Т.е. наоборот, когда около нуля, то мы открываем, иначе закрываем

![[Pasted image 20240711093310.png|Timeline_Angle_NearlyEqual]]

Тем самым мы, когда дверь закрывается - можем сколь угодно раз жать X - она все равно будет продолжать закрываться, пока не закроется. И только тогда X начнет срабатывать.

Для таймлайна всегда создается переменная

![[Pasted image 20240711093659.png|Timeline_Door_Variable]]

Мы можем ее вытащить на сцену и вызывать события. 

![[Pasted image 20240711093722.png|Timeline_Door_Variable_OnScene]]

- Play - запустить таймлайн
- Set new time
- Set play rate - установить скорость воспроизведения таймлайна

и так далее.